# Replacing HTML entities found in the list of stations/groups

The CSV file generated by `m3u_to_pyradio -d` contains HTML entities (such as \&quot; \&gt; \&lt; \&#039; etc) which are not meant to be displayed in this way; HTML browsers will "translate" them to the corresponding characters during page rendering.

Unfortunately, this is not the case with `pyradio`; it will display what's given to it.

So these entities must be converted to characters beforehand.

## Dependencies

For this method to work, the following packages must be installed:

- grep
- sed
- sort
- w3m

## How to get HTML entities

Create the CSV file

    m3u_to_pyradio -d && mv stations.csv junguler-pyradio.csv

Get the HTML entities

    grep -e '&[^;]*;' junguler-pyradio.csv | sed 's|.*\(&[^;]*;\).*|\1|' | sort -u > html

Finally, get the dictionary

    while read line
    do
        echo -n "'""$line""': '"
        echo -n "$line" | w3m -dump -T text/html
    done < html | sed -e "s/$/',/" -e "s/'''/\"'\"/g"
    rm html

which gives:

    '&#039;': "'",
    '&#1110;': 'і',
    '&#225;': 'á',
    '&#227;': 'ã',
    '&#39;': "'",
    '&#47;': '/',
    '&#93;': ']',
    '&amp;': '&',
    '&apos;': "'",
    '&gt;': '>',
    '&quot;': '"',
    '&#xe1;': 'á',

Copy (and replace) this output in `converter.py`, dictionary **ent**.

This is the outpupt (in `pyradio`)


![Mabox_20230326-02-45-28](https://user-images.githubusercontent.com/5807638/227749414-b8edddfb-68df-4206-99f3-cba57a6c443b.png)

and that's how it used to be (without HTML entities replacement)

![227746116-93efaec3-897d-4b90-ae63-c428a78f500c](https://user-images.githubusercontent.com/5807638/227765781-b8b0f1fe-357e-4fc3-9272-3769ccba45df.png)
